&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
&lt;title&gt;Visitor Stats Sync Test - Dhaka Commute&lt;/title&gt;
&lt;style&gt;
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
min-height: 100vh;
padding: 20px;
display: flex;
align-items: center;
justify-content: center;
}

.container {
background: white;
border-radius: 20px;
padding: 40px;
max-width: 800px;
width: 100%;
box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
}

h1 {
color: #333;
margin-bottom: 10px;
font-size: 28px;
}

.subtitle {
color: #666;
margin-bottom: 30px;
font-size: 14px;
}

.stats-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 20px;
margin-bottom: 30px;
}

.stat-card {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
padding: 25px;
border-radius: 15px;
box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.stat-card.success {
background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
}

.stat-card.warning {
background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
}

.stat-label {
font-size: 12px;
opacity: 0.9;
margin-bottom: 8px;
text-transform: uppercase;
letter-spacing: 1px;
}

.stat-value {
font-size: 36px;
font-weight: bold;
margin-bottom: 5px;
}

.stat-source {
font-size: 11px;
opacity: 0.8;
}

.status-indicator {
display: inline-flex;
align-items: center;
gap: 8px;
padding: 8px 16px;
border-radius: 20px;
font-size: 13px;
font-weight: 600;
margin-bottom: 20px;
}

.status-indicator.connected {
background: #d4edda;
color: #155724;
}

.status-indicator.disconnected {
background: #f8d7da;
color: #721c24;
}

.status-dot {
width: 8px;
height: 8px;
border-radius: 50%;
animation: pulse 2s infinite;
}

.status-indicator.connected .status-dot {
background: #28a745;
}

.status-indicator.disconnected .status-dot {
background: #dc3545;
}

@keyframes pulse {
0%, 100% { opacity: 1; }
50% { opacity: 0.5; }
}

.log-section {
background: #f8f9fa;
border-radius: 10px;
padding: 20px;
max-height: 300px;
overflow-y: auto;
}

.log-section h3 {
color: #333;
margin-bottom: 15px;
font-size: 16px;
}

.log-entry {
font-family: 'Courier New', monospace;
font-size: 12px;
padding: 8px;
margin-bottom: 5px;
border-radius: 5px;
background: white;
border-left: 3px solid #667eea;
}

.log-entry.success {
border-left-color: #28a745;
background: #f0fff4;
}

.log-entry.error {
border-left-color: #dc3545;
background: #fff5f5;
}

.timestamp {
color: #999;
margin-right: 10px;
}

.actions {
display: flex;
gap: 10px;
margin-top: 20px;
}

button {
flex: 1;
padding: 12px 24px;
border: none;
border-radius: 8px;
font-weight: 600;
cursor: pointer;
transition: all 0.3s;
font-size: 14px;
}

button.primary {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
}

button.secondary {
background: #e9ecef;
color: #333;
}

button:hover {
transform: translateY(-2px);
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

button:active {
transform: translateY(0);
}

.sync-info {
background: #e7f3ff;
border-left: 4px solid #0066cc;
padding: 15px;
border-radius: 8px;
margin-top: 20px;
}

.sync-info h4 {
color: #0066cc;
margin-bottom: 8px;
font-size: 14px;
}

.sync-info p {
color: #555;
font-size: 13px;
line-height: 1.6;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class="container"&gt;
&lt;h1&gt;üîÑ Visitor Stats Synchronization Test&lt;/h1&gt;
&lt;p class="subtitle"&gt;Testing real-time visitor count sync from backend&lt;/p&gt;

&lt;div id="wsStatus" class="status-indicator disconnected"&gt;
&lt;span class="status-dot"&gt;&lt;/span&gt;
&lt;span&gt;Connecting to WebSocket...&lt;/span&gt;
&lt;/div&gt;

&lt;div class="stats-grid"&gt;
&lt;div class="stat-card"&gt;
&lt;div class="stat-label"&gt;Total Visitors&lt;/div&gt;
&lt;div class="stat-value" id="totalVisitors"&gt;-&lt;/div&gt;
&lt;div class="stat-source"&gt;From Backend&lt;/div&gt;
&lt;/div&gt;

&lt;div class="stat-card success"&gt;
&lt;div class="stat-label"&gt;Active Users&lt;/div&gt;
&lt;div class="stat-value" id="activeUsers"&gt;-&lt;/div&gt;
&lt;div class="stat-source"&gt;Live Count&lt;/div&gt;
&lt;/div&gt;

&lt;div class="stat-card warning"&gt;
&lt;div class="stat-label"&gt;Today's Visits&lt;/div&gt;
&lt;div class="stat-value" id="todayVisits"&gt;-&lt;/div&gt;
&lt;div class="stat-source"&gt;Last 24 Hours&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="sync-info"&gt;
&lt;h4&gt;üìä Backend Source: koyjabo-backend.onrender.com&lt;/h4&gt;
&lt;p&gt;
&lt;strong&gt;Expected Total:&lt;/strong&gt; 8693 (or current backend value)&lt;br&gt;
&lt;strong&gt;Update Frequency:&lt;/strong&gt; Real-time via WebSocket + 2s polling&lt;br&gt;
&lt;strong&gt;Last Update:&lt;/strong&gt; &lt;span id="lastUpdate"&gt;-&lt;/span&gt;
&lt;/p&gt;
&lt;/div&gt;

&lt;div class="actions"&gt;
&lt;button class="primary" onclick="fetchFromAPI()"&gt;üîÑ Force Refresh from API&lt;/button&gt;
&lt;button class="secondary" onclick="clearLogs()"&gt;üóëÔ∏è Clear Logs&lt;/button&gt;
&lt;/div&gt;

&lt;div class="log-section"&gt;
&lt;h3&gt;üìã Connection Logs&lt;/h3&gt;
&lt;div id="logs"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;script&gt;
const WS_URL = 'wss://koyjabo-backend.onrender.com';
const API_URL = 'https://koyjabo-backend.onrender.com/api/stats';

let ws = null;
let reconnectTimer = null;

function log(message, type = 'info') {
const logsDiv = document.getElementById('logs');
const entry = document.createElement('div');
entry.className = `log-entry ${type}`;

const timestamp = new Date().toLocaleTimeString();
entry.innerHTML = `&lt;span class="timestamp"&gt;${timestamp}&lt;/span&gt;${message}`;

logsDiv.insertBefore(entry, logsDiv.firstChild);

// Keep only last 20 logs
while (logsDiv.children.length &gt; 20) {
logsDiv.removeChild(logsDiv.lastChild);
}
}

function updateStatus(connected) {
const statusEl = document.getElementById('wsStatus');
if (connected) {
statusEl.className = 'status-indicator connected';
statusEl.innerHTML = '&lt;span class="status-dot"&gt;&lt;/span&gt;&lt;span&gt;‚úì Connected to Backend&lt;/span&gt;';
} else {
statusEl.className = 'status-indicator disconnected';
statusEl.innerHTML = '&lt;span class="status-dot"&gt;&lt;/span&gt;&lt;span&gt;‚úó Disconnected&lt;/span&gt;';
}
}

function updateStats(stats) {
const totalEl = document.getElementById('totalVisitors');
const activeEl = document.getElementById('activeUsers');
const todayEl = document.getElementById('todayVisits');
const lastUpdateEl = document.getElementById('lastUpdate');

const total = stats.totalVisitors ?? stats.totalVisits ?? 0;
const active = stats.activeUsers ?? 0;
const today = stats.todayVisits ?? stats.todayVisitors ?? 0;

// Animate number change
if (totalEl.textContent !== total.toString()) {
totalEl.style.transform = 'scale(1.1)';
setTimeout(() =&gt; totalEl.style.transform = 'scale(1)', 200);
}

totalEl.textContent = total.toLocaleString();
activeEl.textContent = active.toLocaleString();
todayEl.textContent = today.toLocaleString();
lastUpdateEl.textContent = new Date().toLocaleTimeString();

log(`üìä Stats updated - Total: ${total}, Active: ${active}, Today: ${today}`, 'success');
}

function connectWebSocket() {
if (ws) return;

log('üîå Connecting to WebSocket...', 'info');

try {
ws = new WebSocket(WS_URL);

ws.onopen = () =&gt; {
log('‚úÖ WebSocket connected successfully!', 'success');
updateStatus(true);
};

ws.onmessage = (event) =&gt; {
try {
const data = JSON.parse(event.data);
log(`üì® Received: ${event.data.substring(0, 100)}...`, 'info');

if (data.type === 'visitor_update' &amp;&amp; data.stats) {
updateStats(data.stats);
}
} catch (e) {
log(`‚ùå Error parsing message: ${e.message}`, 'error');
}
};

ws.onerror = (error) =&gt; {
log(`‚ùå WebSocket error: ${error.message || 'Unknown error'}`, 'error');
updateStatus(false);
};

ws.onclose = () =&gt; {
log('üîå WebSocket closed. Reconnecting in 5s...', 'info');
updateStatus(false);
ws = null;

if (!reconnectTimer) {
reconnectTimer = setTimeout(() =&gt; {
reconnectTimer = null;
connectWebSocket();
}, 5000);
}
};
} catch (e) {
log(`‚ùå Failed to create WebSocket: ${e.message}`, 'error');
updateStatus(false);
}
}

async function fetchFromAPI() {
log('üåê Fetching stats from API...', 'info');

try {
const response = await fetch(API_URL);

if (!response.ok) {
throw new Error(`HTTP ${response.status}: ${response.statusText}`);
}

const data = await response.json();
log(`‚úÖ API fetch successful!`, 'success');
updateStats(data);
} catch (e) {
log(`‚ùå API fetch failed: ${e.message}`, 'error');
}
}

function clearLogs() {
document.getElementById('logs').innerHTML = '';
log('Logs cleared', 'info');
}

// Initialize on page load
window.addEventListener('DOMContentLoaded', () =&gt; {
log('üöÄ Test page loaded', 'success');
connectWebSocket();
fetchFromAPI();

// Poll API every 2 seconds
setInterval(fetchFromAPI, 2000);
});

// Add smooth transitions
document.querySelectorAll('.stat-value').forEach(el =&gt; {
el.style.transition = 'transform 0.2s ease';
});
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;